(function(){"use strict";if(typeof window=="undefined"||typeof document=="undefined")return;function h(t,o){if(t){if(o){t.hidden=!0,t.hasAttribute("hidden")||t.setAttribute("hidden",""),t.setAttribute("aria-hidden","true");return}t.hidden=!1,t.removeAttribute("hidden"),t.setAttribute("aria-hidden","false")}}function D(t){return!(!t||typeof t.hasAttribute!="function"||t.hasAttribute("disabled")||t.hasAttribute("hidden")||t.getAttribute("aria-hidden")==="true")}function f(t){if(!(!t||typeof t.focus!="function"))try{t.focus({preventScroll:!0})}catch{t.focus()}}function m(t){if(!t)return[];var o=["a[href]","area[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","),c=t.querySelectorAll(o);return Array.prototype.filter.call(c,function(r){if(!D(r))return!1;for(var i=r;i&&i!==t;){if(i.hasAttribute("hidden")||i.getAttribute("aria-hidden")==="true")return!1;i=i.parentElement}return!0})}function z(){var t=document.querySelector(".blitz-dock");t&&(t.dataset&&t.dataset.bdIconFallback==="1"||!t.dataset&&t.getAttribute("data-bd-icon-fallback")==="1"||(t.dataset?t.dataset.bdIconFallback="1":t.setAttribute("data-bd-icon-fallback","1"),t.addEventListener("error",function(c){var r=c&&c.target?c.target:null;if(!(!r||r.tagName!=="IMG")&&!(!r.classList||!r.classList.contains("blitz-dock-channels__icon"))&&!(r.dataset&&r.dataset.fallbackApplied==="1")&&!((!r.dataset||typeof r.dataset.fallbackApplied=="undefined")&&r.getAttribute("data-fallback-applied")==="1"))try{var i=new URL(r.src,window.location.href);if(/\/default\.png$/i.test(i.pathname))return;i.pathname=i.pathname.replace(/\/[^/]+$/,"/default.png"),r.dataset&&(r.dataset.fallbackApplied="1"),r.setAttribute("data-fallback-applied","1"),r.src=i.toString()}catch{}},!0)))}function C(){var t=document.getElementById("blitz-dock-convo-start");if(t){var o="bd_started_at",c=t.dataset||{},r=c.startedAt||t.getAttribute("data-started-at")||null;if(!r)try{window.localStorage&&(r=window.localStorage.getItem(o))}catch{r=null}if(!r){r=new Date().toISOString();try{window.localStorage&&window.localStorage.setItem(o,r)}catch{}}var i=new Date(r);isNaN(i.getTime())&&(i=new Date);var b=document.documentElement||null,s=b&&b.lang?b.lang:"en",u,v;if(window.Intl&&typeof window.Intl.DateTimeFormat=="function"){try{u=new window.Intl.DateTimeFormat(s,{hour:"numeric",minute:"2-digit"})}catch{u=new window.Intl.DateTimeFormat("en",{hour:"numeric",minute:"2-digit"})}try{v=new window.Intl.DateTimeFormat(s,{month:"short",day:"numeric"})}catch{v=new window.Intl.DateTimeFormat("en",{month:"short",day:"numeric"})}}var g=t.querySelector(".blitz-dock__started-time"),k=t.querySelector(".blitz-dock__started-date"),S=t.querySelector(".blitz-dock__conversation-desc");if(g){var y="Started ";u&&v?y+=v.format(i)+" at "+u.format(i):y+=i.toLocaleDateString()+" at "+i.toLocaleTimeString(),g.textContent=y,g.setAttribute("datetime",i.toISOString())}k&&(k.textContent="");var I=c.agent||t.getAttribute("data-agent")||"Blitz Dock";S&&(S.textContent=I+" (AI agent): Ask me a question, choose an option below, or connect with our team.")}}document.addEventListener("DOMContentLoaded",function(){var o=document.querySelector("[data-bd-root]");if(C(),!o)return;var c=o.querySelector("[data-bd-bubble]"),r=o.querySelector("[data-bd-panel]"),i=o.querySelector("[data-bd-overlay]"),b=o.querySelector("[data-bd-close]"),s=Array.prototype.slice.call(o.querySelectorAll("[data-bd-view]"));if(!c||!r||!i||!b||!s.length)return;var u={switchingView:!1,closeLock:!1,lastActive:null};function v(e){if(!e)return null;for(var a=0;a<s.length;a+=1)if(s[a].dataset&&s[a].dataset.bdView===e)return s[a];return null}function g(){for(var e=0;e<s.length;e+=1)if(s[e].getAttribute("aria-hidden")==="false")return s[e];return null}function k(){var e=g();return e&&e.dataset?e.dataset.bdView:null}function S(e){var a=o.querySelectorAll("[data-bd-target]");Array.prototype.forEach.call(a,function(n){if(n.dataset&&n.hasAttribute("aria-expanded")){var l=n.dataset.bdTarget===e;n.setAttribute("aria-expanded",l?"true":"false")}})}function y(e){var a=b.dataset||{},n=a.closeLabelHome||b.getAttribute("aria-label")||"Close panel",l=n.trim();l||(l="Close panel");var d=a.closeLabelBack||l;d=d.trim(),d||(d=l);var E=e==="home"?l:d;b.setAttribute("aria-label",E)}function I(){var e=v("home");if(e){var a=e.querySelector(".blitz-dock__nav-button");if(a&&D(a)){f(a);return}var n=m(e);n.length&&f(n[0])}}function p(e,a,n){if(e==="home"){I();return}if(e==="channels"){var l=a?a.querySelector("#blitz-dock-channels-title"):null;if(l){l.hasAttribute("tabindex")||l.setAttribute("tabindex","-1"),f(l);return}}var d=m(a);if(d.length){f(d[0]);return}n&&f(n)}function F(){var e=g(),a=m(e);if(a.length){f(a[0]);return}var n=m(r);if(n.length){f(n[0]);return}f(b)}function w(e,a){if(!(!e||u.switchingView)){var n=v(e);if(n){u.switchingView=!0;var l=a||{};try{s.forEach(function(d){h(d,d!==n)}),y(e),S(e),l.focus&&p(e,n,l.trigger||null)}finally{u.switchingView=!1}}}}function _(){r.hidden&&(u.lastActive=document.activeElement,c.setAttribute("aria-expanded","true"),h(r,!1),h(i,!1),document.body.classList.add("blitz-dock-scroll-lock"),o.classList.add("blitz-dock--open"),w("home",{focus:!1}),document.addEventListener("keydown",T,!0),F())}function L(){if(!r.hidden){c.setAttribute("aria-expanded","false"),document.removeEventListener("keydown",T,!0),w("home",{focus:!1}),h(r,!0),h(i,!0),document.body.classList.remove("blitz-dock-scroll-lock"),o.classList.remove("blitz-dock--open");var e=u.lastActive&&D(u.lastActive)?u.lastActive:c;f(e),u.lastActive=null}}function T(e){if(e.key==="Escape"){e.preventDefault(),L();return}if(e.key==="Tab"){var a=m(r);if(a.length){var n=a[0],l=a[a.length-1];if(e.shiftKey){(document.activeElement===n||!r.contains(document.activeElement))&&(e.preventDefault(),f(l));return}document.activeElement===l&&(e.preventDefault(),f(n))}}}o.addEventListener("click",function(a){if(typeof a.target.closest=="function"){var n=a.target.closest("[data-bd-bubble]");if(n){a.preventDefault(),r.hidden?_():L();return}var l=a.target.closest("[data-bd-overlay]");if(l){a.preventDefault(),a.stopPropagation(),L();return}var d=a.target.closest("[data-bd-close]");if(d){if(a.preventDefault(),u.closeLock)return;u.closeLock=!0;try{var E=k();E&&E!=="home"?w("home",{focus:!0,trigger:d}):L()}finally{u.closeLock=!1}return}var A=a.target.closest("[data-bd-target]");if(!(!A||!o.contains(A))){var q=A.dataset?A.dataset.bdTarget:null;q&&(a.preventDefault(),w(q,{trigger:A,focus:!0}))}}}),w("home",{focus:!1}),o.classList.remove("blitz-dock--hidden"),z()})})();